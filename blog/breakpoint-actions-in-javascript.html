<!DOCTYPE html><html><head><link rel="stylesheet" href="/css/main.css"><title>Breakpoint Actions in JavaScript</title></head><body><p>Earlier today, I filled out the <a href="https://docs.google.com/forms/d/1hhZwGQmtNeiRhPwxLurPaVElB0h_E6h_qjnzpxAXdtI/viewform">Chrome DevTools Survey &amp; Feedback</a>
(which you should too, if you&#39;re a web developer), and near the bottom of the
survey, there was a question:</p>
<blockquote>
<p>Are there any tools or features you think are missing that would better help
you develop your webapps?</p>
</blockquote>
<p>My initial answer was No, there wasn&#39;t anything I felt was missing. DevTools are
awesome, and there hasn&#39;t really been anything I&#39;ve felt like I needed.</p>
<p>Later in the day, I ran into a very common scenario: I was debugging something
where I wanted to observe a value at a particular line of code. There are
a couple of ways to approach it:</p>
<ul>
<li>Drop in a <code>debugger</code> statement or set a breakpoint to stop execution and use
the console and/or watch statements to observe the value</li>
<li>Inject some <code>console.log</code> statements to write the value out to the console</li>
</ul>
<p>In this case, the <code>console.log</code> approach would be ideal. However, I didn&#39;t have
access to modify the code directly, and while I could have used the live
editing features, it was also minified code, meaning that live edit was an ugly
option.</p>
<p>Thinking back to the survey question, I now had an answer: Wouldn&#39;t it be nice
if there was some way to have some sort of action kicked off, breakpoint-style,
where I&#39;m not editing the code directly?</p>
<p>I asked some friends, and it turns out, other development environments have a
similar concept. Xcode has <a href="http://useyourloaf.com/blog/2011/02/21/xcode-breakpoint-actions.html">Breakpoint Actions</a> (as do some other IDEs) which
look to be exactly what I wanted. While bouncing this idea around, I realized
that I could actually fake it in the browser, right now.</p>
<p>Chrome supports conditional breakpoints. Adding them is easy. First, find the
line you want to set a breakpoint on, and click the line number to apply a
breakpoint like normal:</p>
<p>{% img /images/blog/2012-11-28-breakpoint-actions/breakpoints-1.png [Set a breakpoint] %}</p>
<p>Then you right-click on it, and select &quot;Edit Breakpoint&quot;:</p>
<p>{% img /images/blog/2012-11-28-breakpoint-actions/breakpoints-2.png [Edit Breakpoint] %}</p>
<p>You&#39;re presented with your cursor in a field like so, where you can define an
expression. If the expression evaluates to a truthy value, execution will break
here.</p>
<p>{% img /images/blog/2012-11-28-breakpoint-actions/breakpoints-3.png [Set Condition] %}</p>
<p>It&#39;s not uncommon to set simple expressions like <code>someObj.id === &#39;1&#39;</code>, but I
realized that <em>any</em> valid JS expression would be evaluated any time this line
was hit -- including the <code>console.log</code> statement I wanted to add!</p>
<p>{% img /images/blog/2012-11-28-breakpoint-actions/breakpoints-4.png [console.log dirtiness] %}</p>
<p>This approach works quite well. Looking over at the console after moving my
mouse around a bit on this page (which happens to be the <a href="https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints">Chrome DevTools
Breakpoints page</a>), you can clearly see the added
<code>console.log</code> firing:</p>
<p>{% img /images/blog/2012-11-28-breakpoint-actions/breakpoints-5.png [console.log is working!] %}</p>
<p>Since <code>console.log</code> doesn&#39;t have a meaningful return value, the <code>undefined</code>
means the conditional breakpoint won&#39;t pause execution, and the code moves on.
It&#39;s just like a coded <code>console.log</code> statement, without having to actually
modify the code.</p>
<p>Using a conditional breakpoint like this feels horribly hacky, and yet, I love
this idea. It achieves the exact goal that I wanted. It&#39;s not elegant, it&#39;s not
by design, but it gets the job done, like so many other things in web
development.</p>
<p>As an added note, Firebug supports conditional breakpoints in much the same
way, and this approach totally works there as well. In both cases, it&#39;s working
simply because you&#39;re just evaluating the expression, and only pausing
execution if it evaluates to a truthy value. </p>
<p>Hopefully you&#39;ll find this useful at some point! I already have.</p>
</body></html>